{"ast":null,"code":"var _s = $RefreshSig$();\nimport { async } from '@firebase/util';\nimport { db } from \"../firebase/config\";\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile, signOut } from 'firebase/auth';\nimport { useState, useEffect } from 'react';\nexport const useAuthentication = () => {\n  _s();\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(null);\n\n  // cleanup\n  // deal with memory leak\n  const [cancelled, setCancelled] = useState(false);\n  const auth = getAuth();\n  function checkIfCancelled() {\n    if (cancelled) {\n      return;\n    }\n  }\n\n  // register\n  const createUser = async data => {\n    checkIfCancelled();\n    setLoading(true);\n    setError(null);\n    try {\n      const {\n        user\n      } = await createUserWithEmailAndPassword(auth, data.email, data.password);\n      await updateProfile(user, {\n        displayName: data.displayName\n      });\n      return user;\n    } catch (error) {\n      console.log(error.message);\n      console.log(typeof error.message);\n      let systemErrorMessage;\n      if (error.message.includes(\"Password\")) {\n        systemErrorMessage = \"A senha precisa conter pelo menos 6 caracteres.\";\n      } else if (error.message.includes(\"email-already\")) {\n        systemErrorMessage = \"E-mail ja cadastrado.\";\n      } else {\n        systemErrorMessage = \"Ocorreu um erro, por favor tente mais tarde.\";\n      }\n      setError(systemErrorMessage);\n    }\n    setLoading(false);\n  };\n\n  // logout - sign out\n  const logout = () => {\n    checkIfCancelled();\n    signOut(auth);\n  };\n\n  // login - sign in\n  const login = async data => {\n    checkIfCancelled();\n    setLoading(true);\n    setError(false);\n    try {\n      await signInWithEmailAndPassword(auth, data.email, data.password);\n      setLoading(false);\n    } catch (error) {\n      let systemErrorMessage;\n      if (error.message.includes(\"user-not-found\")) {\n        systemErrorMessage = \"Usuario nao encontrado.\";\n      } else if (error.message.includes(\"wrong-password\")) {\n        systemErrorMessage = \"Senha incorreta.\";\n      } else {\n        systemErrorMessage = \"Ocorreu um erro, por favor tente mais tarde.\";\n      }\n      setError(systemErrorMessage);\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    return () => setCancelled(true);\n  }, []);\n  return {\n    auth,\n    createUser,\n    error,\n    loading,\n    logout,\n    login\n  };\n};\n_s(useAuthentication, \"xO6KHeiqqCsOzooKHe/mUZTZLjs=\");","map":{"version":3,"names":["async","db","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","updateProfile","signOut","useState","useEffect","useAuthentication","error","setError","loading","setLoading","cancelled","setCancelled","auth","checkIfCancelled","createUser","data","user","email","password","displayName","console","log","message","systemErrorMessage","includes","logout","login"],"sources":["/home/samuelximenes/Documentos/Projects/smart_infra/src/hooks/userAuthentication.js"],"sourcesContent":["import { async } from '@firebase/util';\n\nimport { db } from \"../firebase/config\";\n\nimport {\n    getAuth,\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n    updateProfile,\n    signOut\n} from 'firebase/auth'\n\nimport { useState, useEffect } from 'react'\n\nexport const useAuthentication = () => {\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(null);\n\n    // cleanup\n    // deal with memory leak\n    const [cancelled, setCancelled] = useState(false);\n\n    const auth = getAuth();\n\n    function checkIfCancelled() {\n        if (cancelled) {\n            return;\n        }\n    }\n\n    // register\n    const createUser = async (data) => {\n        checkIfCancelled();\n\n        setLoading(true);\n        setError(null);\n\n        try {\n\n            const { user } = await createUserWithEmailAndPassword(\n                auth,\n                data.email,\n                data.password\n            );\n\n            await updateProfile(user, {\n                displayName: data.displayName\n            })\n\n            return user;\n\n        } catch (error) {\n            console.log(error.message);\n            console.log(typeof error.message);\n\n            let systemErrorMessage;\n\n            if (error.message.includes(\"Password\")) {\n                systemErrorMessage = \"A senha precisa conter pelo menos 6 caracteres.\";\n            } else if (error.message.includes(\"email-already\")) {\n                systemErrorMessage = \"E-mail ja cadastrado.\";\n            } else {\n                systemErrorMessage = \"Ocorreu um erro, por favor tente mais tarde.\";\n            }\n            setError(systemErrorMessage);\n\n        }\n\n        setLoading(false);\n    }\n\n    // logout - sign out\n    const logout = () => {\n\n        checkIfCancelled();\n\n        signOut(auth);\n    }\n\n    // login - sign in\n    const login = async (data) => {\n\n        checkIfCancelled();\n\n        setLoading(true);\n        setError(false);\n\n        try {\n\n            await signInWithEmailAndPassword(auth, data.email, data.password);\n            setLoading(false);\n\n        } catch (error) {\n\n            let systemErrorMessage;\n\n            if (error.message.includes(\"user-not-found\")) {\n                systemErrorMessage = \"Usuario nao encontrado.\"\n            } else if (error.message.includes(\"wrong-password\")) {\n                systemErrorMessage = \"Senha incorreta.\"\n            } else {\n                systemErrorMessage = \"Ocorreu um erro, por favor tente mais tarde.\"\n            }\n\n            setError(systemErrorMessage);\n            setLoading(false);\n        }\n    }\n\n    useEffect(() => {\n        return () => setCancelled(true);\n    }, []);\n\n    return {\n        auth,\n        createUser,\n        error,\n        loading,\n        logout,\n        login,\n    };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}